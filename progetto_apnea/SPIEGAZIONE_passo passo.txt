Ecco una spiegazione dettagliata delle modifiche e delle scelte implementative:

1. Filtro Passa-basso (0.1 Hz)
- Scelta della frequenza: 0.1 Hz è appropriata per analizzare variazioni lente nel segnale di apnea
- Le apnee tipicamente durano diversi secondi, quindi vogliamo mantenere solo le componenti a bassa frequenza
- Rimuove le oscillazioni rapide che potrebbero essere rumore
2. Ordine del Filtro (4)
- Ridotto da 5 a 4 per migliorare la stabilità
- Un ordine più basso produce meno oscillazioni indesiderate
- Compromesso tra selettività e stabilità del filtro
3. Normalizzazione del Segnale
```python
y = (y - np.min(y)) / (np.max(y) - np.min(y))
 ```
```

- Mantiene il segnale nell'intervallo [0,1]
- Facilita il confronto tra diverse registrazioni
- Previene problemi di scala nel segnale filtrato
4. Calcolo delle Ampiezze
- Finestre di 30 secondi con passo di 1 secondo
- L'ampiezza (max-min) in ogni finestra indica la variabilità della respirazione
- Valori più alti suggeriscono maggiore instabilità respiratoria
5. Visualizzazione
- Tre grafici per confrontare:
  - Segnale originale
  - Segnale filtrato
  - Distribuzione delle ampiezze
- Permette di valutare l'effetto del filtraggio e la distribuzione delle variazioni